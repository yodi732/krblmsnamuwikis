\
{% extends "_base.html" %}
{% block content %}
  <h1>문서 목록</h1>
  <div class="grid">
  {% for t in tops %}
    <section class="card">
      <header class="card-head">
        <a class="title" href="{{ url_for('doc_view', doc_id=t.id) }}">{{ t.title }}</a>
        <span class="muted">{{ t.updated_at.date() }}</span>
        {% if cu %}
        <form class="inline" method="post" action="{{ url_for('doc_delete', doc_id=t.id) }}" onsubmit="return confirm('문서 \"{{t.title}}\" 을(를) 삭제할까요? 하위 문서도 함께 삭제됩니다.');">
          <button class="pill danger small" type="submit">삭제</button>
        </form>
        {% endif %}
      </header>
      <div class="card-body">
        {% if t.children %}
          <ul class="children">
            {% for c in t.children|sort(attribute='updated_at', reverse=True) %}
              <li>
                <a href="{{ url_for('doc_view', doc_id=c.id) }}">{{ c.title }}</a>
                <span class="muted">{{ c.updated_at.date() }}</span>
                {% if cu %}
                <form class="inline" method="post" action="{{ url_for('doc_delete', doc_id=c.id) }}" onsubmit="return confirm('문서 \"{{c.title}}\" 을(를) 삭제할까요?');">
                  <button class="pill danger xs" type="submit">삭제</button>
                </form>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="muted">하위 문서 없음</div>
        {% endif %}
      </div>
    </section>
  {% endfor %}
  </div>
{% endblock %}
