
{% extends "base.html" %}
{% block content %}
<h2 class="page-title">문서 목록</h2>

{% if g.user %}
  <div class="right mb8"><a class="btn" href="{{ url_for('create_document') }}">문서 만들기</a></div>
{% endif %}

<div class="card">
  {% for d in docs %}
    <div class="row between vcenter item">
      <div class="grow">
        <a href="{{ url_for('view_document', doc_id=d.id) }}" class="title">{{ d.title }}</a>
        <small class="muted">· {{ d.created_at.strftime("%Y-%m-%d %H:%M") }}</small>
      </div>
      {% if g.user %}
      <div class="actions">
        <a class="btn sm" href="{{ url_for('edit_document', doc_id=d.id) }}">수정</a>
        <form method="post" action="{{ url_for('delete_document', doc_id=d.id) }}" onsubmit="return confirm('문서를 삭제할까요? 하위 문서도 함께 삭제됩니다.');">
          <button class="btn sm danger" type="submit">삭제</button>
        </form>
      </div>
      {% endif %}
    </div>
  {% else %}
    <div class="empty">문서가 없습니다.</div>
  {% endfor %}
</div>
{% endblock %}
