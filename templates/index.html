
{% extends "base.html" %}
{% block content %}
  <section class="panel">
    <h2>목차</h2>
    <div class="toc">
      {% if roots %}
        {% for r in roots %}
          <div class="toc-item">
            <a href="{{ url_for('view_page', pid=r.id) }}">{{ r.title }}</a>
            {% if r.children %}
              <ul class="children">
                {% for c in r.children %}
                  <li><a href="{{ url_for('view_page', pid=c.id) }}">{{ c.title }}</a></li>
                {% endfor %}
              </ul>
            {% endif %}
          </div>
        {% endfor %}
      {% else %}
        <p>아직 문서가 없습니다. 우측 상단의 “문서 만들기”로 추가하세요.</p>
      {% endif %}
    </div>
  </section>

  <section class="panel">
    <h2>문서 목록</h2>
    <ul>
      {% for r in roots %}
        <li><a href="{{ url_for('view_page', pid=r.id) }}">{{ r.title }}</a>
          {% if r.children %} &middot;
            {% for c in r.children %}
              <a href="{{ url_for('view_page', pid=c.id) }}">{{ c.title }}</a>{% if not loop.last %}, {% endif %}
            {% endfor %}
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </section>
{% endblock %}
