{% extends "base.html" %}
{% block content %}
<h2>홈</h2>

<div style="display:flex; gap:8px; justify-content:flex-end; margin-bottom:8px;">
  <a class="btn" href="{{ url_for('index') }}">문서 목록</a>
  <a class="btn" href="{{ url_for('create_document') }}">문서 만들기</a>
  <a class="btn" href="{{ url_for('logs') }}">로그 보기</a>
</div>

{% macro render_node(n, depth) -%}
  <div style="margin-left: {{ depth * 16 }}px; line-height:1.9;">
    <a href="{{ url_for('view_document', doc_id=n.id) }}">{{ n.title }}</a>
  </div>
  {%- for c in n.children.order_by(doc_model.created_at.desc()) %}
    {{ render_node(c, depth+1) }}
  {%- endfor %}
{%- endmacro %}

{% for r in roots %}
  {{ render_node(r, 0) }}
{% else %}
  <div>상위 문서가 없습니다.</div>
{% endfor %}
{% endblock %}
