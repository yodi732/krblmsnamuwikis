{% extends "base.html" %}
{% block content %}
  {% include "components/top_actions.html" %}
  <h2>홈</h2>
  {% macro render_node(n, depth) -%}
    <div style="margin-left: {{ depth*16 }}px; line-height:1.9;">
      <a href="{{ url_for('view_document', doc_id=n.id) }}">{{ n.title }}</a>
      <small class="muted">{{ n.created_at.strftime("%Y-%m-%d %H:%M") }}</small>
    </div>
    {%- for c in n.children.order_by(doc_model.created_at.desc()).all() %}
      {{ render_node(c, depth+1) }}
    {%- endfor %}
  {%- endmacro %}
  {% for r in roots %}
    {{ render_node(r, 0) }}
  {% else %}
    <div class="row">문서가 없습니다.</div>
  {% endfor %}
{% endblock %}
