
{% extends "base.html" %}
{% block content %}
<h2 class="page-title">{{ '문서 수정' if doc else '새 문서' }}</h2>

{% if error %}<div class="alert">{{ error }}</div>{% endif %}

<form method="post" class="form card">
  <div class="field">
    <label>문서 종류</label>
    <label><input type="radio" name="mode" value="parent" {% if mode=='parent' %}checked{% endif %}> 상위 문서</label>
    <label class="ml8"><input type="radio" name="mode" value="child" {% if mode=='child' %}checked{% endif %}> 하위 문서</label>
  </div>
  <div class="field">
    <label>상위 문서 선택 (하위 문서인 경우)</label>
    <select name="parent_id">
      <option value="">선택 안함</option>
      {% for p in parents %}
        <option value="{{ p.id }}" {% if doc and doc.parent_id==p.id %}selected{% endif %}>{{ p.title }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="field">
    <label>제목</label>
    <input type="text" name="title" value="{{ doc.title if doc else '' }}" required>
  </div>
  <div class="field">
    <label>내용</label>
    <textarea name="content" rows="14" required>{{ doc.content if doc else '' }}</textarea>
  </div>
  <div class="row gap">
    <button class="btn" type="submit">{{ '수정' if doc else '만들기' }}</button>
    <a class="btn outline" href="{{ url_for('home') }}">홈으로</a>
  </div>
</form>
{% endblock %}
