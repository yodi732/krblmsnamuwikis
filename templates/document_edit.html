{% extends "base.html" %}
{% block content %}
<h2>{{ '새 문서' if not doc else '문서 편집' }}</h2>

{% include "_top_actions.html" %}

<form method="post">
  <div style="margin:10px 0">
    <label>문서 종류</label>
    <label><input type="radio" name="mode" value="parent" {{ 'checked' if mode=='parent' else '' }}> 상위 문서</label>
    <label><input type="radio" name="mode" value="child" {{ 'checked' if mode=='child' else '' }}> 하위 문서</label>
    <select name="parent_id">
      <option value="">(상위 문서 선택)</option>
      {% for p in parents %}
        <option value="{{ p.id }}" {{ 'selected' if doc and doc.parent_id==p.id else '' }}>{{ p.title }}</option>
      {% endfor %}
    </select>
  </div>

  <div style="margin:10px 0">
    <label>제목</label><br>
    <input name="title" value="{{ doc.title if doc else '' }}" style="width:720px; max-width:100%;">
  </div>

  <div style="margin:10px 0">
    <label>내용</label><br>
    <textarea name="content" rows="18" style="width:720px; max-width:100%;">{{ doc.content if doc else '' }}</textarea>
  </div>

  <div style="display:flex; gap:8px">
    <button class="btn" type="submit">{{ '저장' if doc else '만들기' }}</button>
    <a class="btn" href="{{ url_for('home') }}">홈으로</a>
  </div>
</form>
{% endblock %}
