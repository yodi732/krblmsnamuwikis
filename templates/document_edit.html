{% extends "base.html" %}
{% block content %}
  <h2>{{ '새 문서' if not doc else '문서 수정' }}</h2>

  <div style="text-align:right; margin-bottom:8px;">
    <a class="btn" href="{{ url_for('home') }}">홈</a>
    <a class="btn" href="{{ url_for('index') }}">문서 목록</a>
  </div>

  <form method="post">
    <div style="margin:8px 0;">
      <label>문서 종류</label><br>
      <label><input type="radio" name="mode" value="parent" {% if mode=='parent' %}checked{% endif %}> 상위 문서</label>
      <label style="margin-left:12px;"><input type="radio" name="mode" value="child" {% if mode=='child' %}checked{% endif %}> 하위 문서</label>
    </div>

    <div style="margin:8px 0;">
      <label>상위 문서 선택</label><br>
      <select name="parent_id" style="min-width:300px;">
        <option value="">(없음)</option>
        {% for p in parents %}
          <option value="{{ p.id }}" {% if doc and doc.parent_id==p.id %}selected{% elif parent and parent.id==p.id %}selected{% endif %}>{{ p.title }}</option>
        {% endfor %}
      </select>
    </div>

    <div style="margin:8px 0;">
      <label>제목</label><br>
      <input type="text" name="title" value="{{ doc.title if doc else '' }}" required style="width:480px;">
    </div>

    <div style="margin:8px 0;">
      <label>내용</label><br>
      <textarea name="content" rows="18" style="width:98%; max-width:980px;">{{ doc.content if doc else '' }}</textarea>
    </div>

    {% if error %}<div class="error" style="color:#c00; margin-top:6px;">{{ error }}</div>{% endif %}

    <p style="margin-top:12px;">
      <button class="btn" type="submit">{{ '수정' if doc else '만들기' }}</button>
    </p>
  </form>
{% endblock %}
